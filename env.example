# Ignite Fitness - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control - it contains sensitive information

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Supabase Database URL
# Get this from your Supabase project settings > API
# Format: https://your-project-id.supabase.co
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key
# Get this from your Supabase project settings > API
# This is safe to expose in client-side code
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key-here

# Supabase Service Role Key (OPTIONAL - for admin operations)
# Get this from your Supabase project settings > API
# KEEP THIS SECRET - never expose in client-side code
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key-here

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Secret Key
# MUST be at least 32 characters with high entropy
# Generate with: openssl rand -base64 32
# Example: JWT_SECRET=your-super-secure-jwt-secret-key-here-32-chars-min
JWT_SECRET=your-super-secure-jwt-secret-key-here-32-chars-min

# JWT Token Expiration
# Format: number + unit (s, m, h, d)
# Examples: 24h, 7d, 30m
JWT_EXPIRES_IN=24h

# CSRF Secret Key
# MUST be at least 32 characters with high entropy
# Generate with: openssl rand -base64 32
CSRF_SECRET=your-super-secure-csrf-secret-key-here-32-chars-min

# Session Secret
# MUST be at least 32 characters with high entropy
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-super-secure-session-secret-key-here-32-chars-min

# =============================================================================
# EXTERNAL API INTEGRATIONS
# =============================================================================

# Strava API Configuration
# Get these from https://www.strava.com/settings/api
STRAVA_CLIENT_ID=your-strava-client-id
STRAVA_CLIENT_SECRET=your-strava-client-secret

# Strava API Rate Limiting
# Default: 600 requests per 15 minutes
STRAVA_RATE_LIMIT=600
STRAVA_RATE_WINDOW=900

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application Environment
# Options: development, staging, production
NODE_ENV=development

# Application URL
# Used for CORS and redirects
# Examples: http://localhost:8888, https://your-app.netlify.app
APP_URL=http://localhost:8888

# Application Name
APP_NAME=Ignite Fitness

# Application Version
APP_VERSION=1.0.0

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
ENABLE_ANALYTICS=true
ENABLE_MARKETING=false
ENABLE_DEBUG_LOGGING=false
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true
ENABLE_AUDIT_LOGGING=true

# =============================================================================
# PRIVACY & COMPLIANCE
# =============================================================================

# Data Retention Settings (in days)
# 0 = indefinite, 30 = 30 days, 365 = 1 year
DEFAULT_DATA_RETENTION=365
MAX_DATA_RETENTION=730
MIN_DATA_RETENTION=30

# Consent Management
CONSENT_VERSION=1.0
CONSENT_REQUIRED=true

# GDPR Compliance
GDPR_COMPLIANCE=true
DATA_EXPORT_ENABLED=true
DATA_DELETION_ENABLED=true

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log Level
# Options: error, warn, info, debug
LOG_LEVEL=info

# Log Format
# Options: json, text
LOG_FORMAT=json

# Enable Safe Logging (masks sensitive data)
SAFE_LOGGING=true

# Audit Log Retention (in days)
AUDIT_LOG_RETENTION=365

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache TTL (Time To Live) in seconds
CACHE_TTL=3600
PLAN_CACHE_TTL=1800
USER_CACHE_TTL=7200

# Cache Size Limits
MAX_CACHE_SIZE=100
MAX_CACHE_MEMORY=50MB

# =============================================================================
# RATE LIMITING
# =============================================================================

# Global Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=900
RATE_LIMIT_MAX=100

# OAuth Rate Limiting
OAUTH_RATE_LIMIT_ENABLED=true
OAUTH_RATE_LIMIT_WINDOW=900
OAUTH_RATE_LIMIT_MAX=5

# API Rate Limiting
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_WINDOW=900
API_RATE_LIMIT_MAX=1000

# =============================================================================
# SECURITY HEADERS
# =============================================================================

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=/csp-report

# HTTP Strict Transport Security
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# X-Frame-Options
X_FRAME_OPTIONS=DENY

# X-Content-Type-Options
X_CONTENT_TYPE_OPTIONS=nosniff

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Enable Debug Mode
DEBUG=false
DEBUG_SQL=false
DEBUG_CACHE=false

# Development Tools
ENABLE_DEV_TOOLS=false
ENABLE_PROFILING=false
ENABLE_METRICS=false

# Test Configuration
TEST_MODE=false
TEST_DATABASE_URL=
TEST_JWT_SECRET=test-jwt-secret-for-testing-only

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Netlify Configuration
NETLIFY_SITE_ID=your-netlify-site-id
NETLIFY_ACCESS_TOKEN=your-netlify-access-token

# CDN Configuration
CDN_ENABLED=false
CDN_URL=

# Static Asset Configuration
STATIC_ASSETS_URL=
STATIC_ASSETS_VERSION=

# =============================================================================
# MONITORING & ALERTING
# =============================================================================

# Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=

# Performance Monitoring
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=300

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Database Backup
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION=30

# Data Export
EXPORT_ENABLED=true
EXPORT_FORMAT=json
EXPORT_COMPRESSION=true

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT SECURITY CONSIDERATIONS:
#
# 1. JWT_SECRET: Must be cryptographically secure with high entropy
#    - Minimum 32 characters
#    - Mix of letters, numbers, and special characters
#    - Generate with: openssl rand -base64 32
#
# 2. CSRF_SECRET: Must be different from JWT_SECRET
#    - Minimum 32 characters
#    - High entropy required
#    - Generate with: openssl rand -base64 32
#
# 3. SESSION_SECRET: Must be different from other secrets
#    - Minimum 32 characters
#    - High entropy required
#    - Generate with: openssl rand -base64 32
#
# 4. SUPABASE_SERVICE_ROLE_KEY: Never expose in client-side code
#    - Keep this secret
#    - Only use in server-side functions
#    - Rotate regularly
#
# 5. STRAVA_CLIENT_SECRET: Keep this secret
#    - Never expose in client-side code
#    - Store securely
#    - Rotate if compromised
#
# 6. Environment Variables:
#    - Never commit .env to version control
#    - Use different values for each environment
#    - Rotate secrets regularly
#    - Use secret management services in production
#
# 7. Production Deployment:
#    - Use HTTPS everywhere
#    - Enable all security headers
#    - Enable rate limiting
#    - Enable audit logging
#    - Use strong secrets
#    - Regular security audits
#
# 8. Development vs Production:
#    - Use different secrets for each environment
#    - Disable debug features in production
#    - Enable all security features in production
#    - Use production-grade secrets in production
#
# 9. Compliance:
#    - Enable GDPR compliance features
#    - Enable audit logging
#    - Enable data export/deletion
#    - Document data processing activities
#
# 10. Monitoring:
#     - Enable error tracking
#     - Enable performance monitoring
#     - Set up alerting
#     - Regular security scans
#
# =============================================================================
# QUICK START GUIDE
# =============================================================================
#
# 1. Copy this file to .env
# 2. Fill in your Supabase credentials
# 3. Generate secure secrets:
#    - JWT_SECRET: openssl rand -base64 32
#    - CSRF_SECRET: openssl rand -base64 32
#    - SESSION_SECRET: openssl rand -base64 32
# 4. Configure Strava API credentials
# 5. Set NODE_ENV=production for production
# 6. Enable all security features
# 7. Test your configuration
# 8. Deploy securely
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# Common Issues:
# 1. JWT_SECRET too weak: Use openssl rand -base64 32
# 2. CORS errors: Check APP_URL configuration
# 3. Database errors: Verify SUPABASE_URL and keys
# 4. Rate limiting: Adjust RATE_LIMIT_* settings
# 5. Security errors: Enable all security features
#
# =============================================================================
# SUPPORT
# =============================================================================
#
# For help with configuration:
# - Check the documentation
# - Review security best practices
# - Test in development first
# - Use production-grade secrets in production
#
# =============================================================================
