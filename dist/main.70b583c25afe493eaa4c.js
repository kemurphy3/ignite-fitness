!function(){var e={776:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=776,e.exports=t}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};const o=window.SafeLogger||console;let a=null,s=!1,r={},i=null,c=null,l=null,d=null,u=null;const g=new Map,p=new Map;async function m(e,t,a={}){const s=`${e}:${t}`;if(g.has(s))return g.get(s);if(p.has(s))return p.get(s);a.showLoading&&function(e="Loading..."){_();const t=document.createElement("div");t.id="loading-overlay",t.className="loading-overlay",t.innerHTML=`\n        <div class="loading-content">\n            <div class="loading-spinner"></div>\n            <p style="margin: 15px 0 0 0; color: #2d3748; font-weight: 500;">${e}</p>\n        </div>\n    `,document.body.appendChild(t)}(a.loadingMessage||`Loading ${t}...`);try{const o=(async()=>{const o=new((await n(776)(e))[t]);return g.set(s,o),o})();p.set(s,o);const r=await o;return p.delete(s),a.showLoading&&_(),r}catch(n){throw o.error("Failed to load module",{modulePath:e,className:t,error:n.message,stack:n.stack}),p.delete(s),a.showLoading&&_(),n}}function f(){const e="2.0",t=localStorage.getItem("ignitefitness_data_version");t!==e&&(o.info("Migrating user data",{fromVersion:t||"1.0",toVersion:e}),t&&"1.0"!==t||function(){try{const e=localStorage.getItem("ignitefitness_users");if(e){const t=JSON.parse(e),n={};Object.keys(t).forEach(e=>{const o=t[e];n[e]={version:"2.0",username:e,password:o.password,athleteName:o.athleteName,personalData:o.personalData||{},goals:o.goals||{},workoutSchedule:o.workoutSchedule||{},sessions:o.sessions||[],preferences:o.preferences||{},lastSync:o.lastSync||Date.now(),createdAt:o.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),localStorage.setItem("ignitefitness_users",JSON.stringify(n))}!function(){const e=localStorage.getItem("strava_access_token"),t=localStorage.getItem("strava_refresh_token"),n=localStorage.getItem("strava_token_expires"),o=localStorage.getItem("strava_athlete_id");if(e&&t){const a={access_token:e,refresh_token:t,expires_at:parseInt(n)||0,athlete_id:o,last_updated:Date.now()};localStorage.setItem("ignitefitness_strava_data",JSON.stringify(a)),localStorage.removeItem("strava_access_token"),localStorage.removeItem("strava_refresh_token"),localStorage.removeItem("strava_token_expires"),localStorage.removeItem("strava_athlete_id")}}(),function(){const e=localStorage.getItem("ignitefitness_workouts");if(e)try{const t=JSON.parse(e);localStorage.setItem("ignitefitness_workout_data",JSON.stringify({workouts:t,version:"2.0",last_updated:Date.now()})),localStorage.removeItem("ignitefitness_workouts")}catch(e){o.error("Error migrating workout data",{error:e.message,stack:e.stack})}}()}catch(e){o.error("Error during data migration",{error:e.message,stack:e.stack})}}(),localStorage.setItem("ignitefitness_data_version",e),o.info("Data migration completed"))}function h(){document.getElementById("loginForm").classList.remove("hidden"),document.getElementById("userDashboard").classList.add("hidden")}function y(){document.getElementById("loginForm").classList.add("hidden"),document.getElementById("userDashboard").classList.remove("hidden");const e=document.getElementById("currentAthleteName");e&&r[a]&&(e.textContent=r[a].athleteName||a)}function v(){if(!a||!r[a])return;const e=r[a];if(e.personalData&&(e.personalData.age&&(document.getElementById("age").value=e.personalData.age),e.personalData.weight&&(document.getElementById("weight").value=e.personalData.weight),e.personalData.height&&(document.getElementById("height").value=e.personalData.height),e.personalData.experience&&(document.getElementById("experience").value=e.personalData.experience)),e.goals){if(e.goals.primary){const t=document.querySelector(`input[name="primaryGoal"][value="${e.goals.primary}"]`);t&&(t.checked=!0)}if(e.goals.secondary){const t=document.querySelector(`input[name="secondaryGoal"][value="${e.goals.secondary}"]`);t&&(t.checked=!0)}}}function k(){var e,t,n;const o=r[a];return o?{goals:o.goals||{},experience:(null===(e=o.personalData)||void 0===e?void 0:e.experience)||"beginner",personalData:o.personalData||{},currentPhase:(null===(t=c)||void 0===t||null===(t=t.getCurrentPhase())||void 0===t?void 0:t.phase)||"off-season",recentWorkouts:(null===(n=o.data)||void 0===n?void 0:n.sessions)||[],preferences:{preferredTimes:[],favoriteExercises:[],intensityPreference:"moderate",sessionLength:"medium",restDayPattern:{}}}:{}}function x(){const e=document.getElementById("syncStatus"),t=document.getElementById("lastSync");if(e&&t){const n=localStorage.getItem("ignitefitness_last_sync");if(n){const o=new Date(parseInt(n));t.textContent=`Last sync: ${o.toLocaleString()}`,e.textContent="‚úÖ Synced"}else t.textContent="Last sync: Never",e.textContent="üîÑ Syncing..."}}function w(){var e,t;const n=(null===(e=document.getElementById("sessionType"))||void 0===e?void 0:e.value)||"Upper Body",s=parseInt(null===(t=document.getElementById("workoutDuration"))||void 0===t?void 0:t.value)||60;if(a&&d){const e=k();try{!function(e){const t=document.getElementById("workoutPlan");if(!t)return;const n=`\n        <div class="workout-plan">\n            <h3>Generated Workout Plan</h3>\n            <div class="workout-info">\n                <p><strong>Type:</strong> ${e.type}</p>\n                <p><strong>Focus:</strong> ${e.focus}</p>\n                <p><strong>Duration:</strong> ${e.duration} minutes</p>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Warmup (${e.warmup.duration} minutes)</h4>\n                <ul>\n                    ${e.warmup.exercises.map(e=>`\n                        <li><strong>${e.name}:</strong> ${e.duration} minutes - ${e.description}</li>\n                    `).join("")}\n                </ul>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Main Exercises</h4>\n                <div class="exercises-list">\n                    ${e.exercises.map((e,t)=>`\n                        <div class="exercise-item">\n                            <h5>${t+1}. ${e.name}</h5>\n                            <div class="exercise-details">\n                                <span><strong>Sets:</strong> ${e.sets}</span>\n                                <span><strong>Reps:</strong> ${e.reps}</span>\n                                <span><strong>Weight:</strong> ${e.weight} lbs</span>\n                                <span><strong>RPE:</strong> ${e.rpe}/10</span>\n                                <span><strong>Rest:</strong> ${e.rest}s</span>\n                            </div>\n                            ${e.notes?`<p class="exercise-notes">${e.notes}</p>`:""}\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Cooldown (${e.cooldown.duration} minutes)</h4>\n                <ul>\n                    ${e.cooldown.exercises.map(e=>`\n                        <li><strong>${e.name}:</strong> ${e.duration} minutes - ${e.description}</li>\n                    `).join("")}\n                </ul>\n            </div>\n            \n            ${e.notes?`\n                <div class="workout-notes">\n                    <h4>Notes</h4>\n                    <p>${e.notes}</p>\n                </div>\n            `:""}\n        </div>\n    `;t.innerHTML=n}(d.generateWorkout(e,n,s)),S("Workout plan generated successfully!")}catch(e){o.error("Workout generation failed",{error:e.message,stack:e.stack}),I(null,"Failed to generate workout plan")}}}function I(e,t){e&&(e.textContent=t,e.style.display="block")}if(document.addEventListener("DOMContentLoaded",()=>{o.info("Ignite Fitness App Starting"),f();const e=localStorage.getItem("ignitefitness_current_user");e&&(a=e,s=!0);const t=localStorage.getItem("ignitefitness_users");if(t)try{r=JSON.parse(t)}catch(e){o.error("Error parsing saved users",{error:e.message,stack:e.stack}),r={}}!async function(){try{await async function(){try{const e=await m("./modules/ai/ContextAwareAI.js","ContextAwareAI");i=e,o.info("AI system initialized")}catch(e){o.warn("ContextAwareAI not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await m("./modules/data/DataStore.js","DataStore");l=e,l.setCurrentUser(a),o.info("Data store initialized")}catch(e){o.warn("DataStore not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await m("./modules/workout/WorkoutGenerator.js","WorkoutGenerator");d=e,o.info("Workout generator initialized")}catch(e){o.warn("WorkoutGenerator not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await m("./modules/ai/PatternDetector.js","PatternDetector");u=e,o.info("Pattern detector initialized")}catch(e){o.warn("PatternDetector not available",{error:e.message,stack:e.stack})}}(),o.info("Core systems initialized successfully")}catch(e){o.error("Failed to initialize core systems",{error:e.message,stack:e.stack}),I(null,"Some features may not be available. Please refresh the page.")}}(),[{path:"./modules/ai/ExpertCoordinator.js",className:"ExpertCoordinator"},{path:"./modules/ui/DashboardRenderer.js",className:"DashboardRenderer"},{path:"./modules/workout/WorkoutGenerator.js",className:"WorkoutGenerator"}].forEach(({path:e,className:t})=>{m(e,t,{showLoading:!1}).catch(e=>o.warn("Preload failed",{className:t,error:e.message,stack:e.stack}))}),function(){const e=document.createElement("style");e.textContent="\n        .workout-plan {\n            background: #f7fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 8px;\n            padding: 20px;\n            margin: 20px 0;\n        }\n        \n        .workout-info {\n            background: white;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 15px 0;\n            border-left: 4px solid #4299e1;\n        }\n        \n        .workout-section {\n            margin: 20px 0;\n        }\n        \n        .workout-section h4 {\n            color: #2d3748;\n            margin-bottom: 10px;\n            padding-bottom: 5px;\n            border-bottom: 2px solid #e2e8f0;\n        }\n        \n        .exercises-list {\n            display: flex;\n            flex-direction: column;\n            gap: 15px;\n        }\n        \n        .exercise-item {\n            background: white;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n        }\n        \n        .exercise-item h5 {\n            margin: 0 0 10px 0;\n            color: #2d3748;\n        }\n        \n        .exercise-details {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 15px;\n            margin: 10px 0;\n        }\n        \n        .exercise-details span {\n            background: #edf2f7;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 14px;\n        }\n        \n        .exercise-notes {\n            margin: 10px 0 0 0;\n            font-style: italic;\n            color: #4a5568;\n            font-size: 14px;\n        }\n        \n        .workout-notes {\n            background: #fff5f5;\n            border: 1px solid #fed7d7;\n            border-radius: 6px;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        \n        .workout-notes h4 {\n            color: #742a2a;\n            margin: 0 0 10px 0;\n        }\n        \n        .workout-notes p {\n            margin: 0;\n            color: #742a2a;\n        }\n    ",document.head.appendChild(e)}(),s&&a?(y(),v(),b(),E(),x(),function(){var e;if(!a)return;const t=r[a],n=document.getElementById("recentWorkoutsList");if(!n)return;const o=((null==t||null===(e=t.data)||void 0===e?void 0:e.sessions)||[]).slice(0,5);if(0===o.length)return void(n.innerHTML="<p>No recent workouts found. Start your first workout!</p>");const s=o.map(e=>{var t;const n=new Date(e.start_at).toLocaleDateString(),o=e.duration||"Unknown",a=(null===(t=e.exercises)||void 0===t?void 0:t.length)||0;return`\n            <div class="workout-item">\n                <div class="workout-info">\n                    <h6>${e.type||"Workout"}</h6>\n                    <p>${n}</p>\n                </div>\n                <div class="workout-stats">\n                    <span>${o} min</span>\n                    <span>${a} exercises</span>\n                </div>\n            </div>\n        `}).join("");n.innerHTML=s}()):h();const n=document.getElementById("aiChatInput");n&&n.addEventListener("keypress",e=>{"Enter"===e.key&&function(){const e=document.getElementById("aiChatInput"),t=e.value.trim();if(!t)return;C(t,"user"),e.value="",function(){const e=document.getElementById("aiChatMessages"),t=document.createElement("div");t.className="ai-chat-message ai",t.id="typing-indicator",t.textContent="AI Coach is thinking...",e.appendChild(t),e.scrollTop=e.scrollHeight}(),i?i.processUserInput(t).then(e=>{B(),C(e,"ai")}).catch(e=>{B(),C("Sorry, I encountered an error. Please try again.","ai"),o.error("AI Error",{error:e.message,stack:e.stack})}):(B(),C("AI system is not available. Please try again later.","ai"))}()}),o.info("Ignite Fitness App Ready")}),"undefined"!=typeof window&&(window._generateWorkoutPlan=function(){w()}),!document.getElementById("notification-styles")){const e=document.createElement("style");e.id="notification-styles",e.textContent="\n        @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        .notification {\n            animation: slideIn 0.3s ease;\n        }\n        .loading-spinner {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n            border: 3px solid rgba(255,255,255,.3);\n            border-radius: 50%;\n            border-top-color: #fff;\n            animation: spin 1s ease-in-out infinite;\n        }\n        @keyframes spin {\n            to { transform: rotate(360deg); }\n        }\n        .loading-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 10000;\n        }\n        .loading-content {\n            background: white;\n            padding: 30px;\n            border-radius: 10px;\n            text-align: center;\n            box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n        }\n    ",document.head.appendChild(e)}function _(){const e=document.getElementById("loading-overlay");e&&e.remove()}function S(e){let t=document.getElementById("success-notification");t||(t=document.createElement("div"),t.id="success-notification",t.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #68d391;\n            color: white;\n            padding: 15px 20px;\n            border-radius: 5px;\n            z-index: 1000;\n            display: none;\n        ",document.body.appendChild(t)),t.textContent=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},3e3)}function b(){if(!c)return;const e=c.getCurrentPhase(),t=document.getElementById("currentPhaseName"),n=document.getElementById("phaseProgress");if(t&&(t.textContent=e.details.name),n){const t=Math.round(100*e.phaseProgress);n.textContent=`${t}% Complete`}}function E(){const e=localStorage.getItem("strava_access_token"),t=localStorage.getItem("strava_refresh_token"),n=localStorage.getItem("strava_token_expires"),o=localStorage.getItem("strava_athlete_id"),a=document.getElementById("stravaStatus"),s=document.getElementById("stravaConnectBtn"),r=document.getElementById("stravaDisconnectBtn"),i=document.getElementById("stravaSyncBtn");if(!e||!t||!n)return a.className="device-status disconnected",a.innerHTML="<p>‚ùå Not connected to Strava</p>",s.style.display="inline-block",r.style.display="none",void(i.style.display="none");const c=Date.now()/1e3,l=parseInt(n);c>=l?D():(a.className="device-status connected",a.innerHTML=`\n        <p>‚úÖ Connected to Strava</p>\n        <div class="device-info">\n            <h5>Athlete ID: ${o||"Unknown"}</h5>\n            <p>Token expires: ${new Date(1e3*l).toLocaleString()}</p>\n        </div>\n    `,s.style.display="none",r.style.display="inline-block",i.style.display="inline-block")}async function D(){const e=localStorage.getItem("strava_refresh_token");if(e)try{const t=await fetch("/.netlify/functions/strava-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"refresh_token",refreshToken:e})});if(!t.ok)throw new Error("Token refresh failed");const n=await t.json();localStorage.setItem("strava_access_token",n.access_token),localStorage.setItem("strava_refresh_token",n.refresh_token),localStorage.setItem("strava_token_expires",n.expires_at),E()}catch(e){o.error("Token refresh failed",{error:e.message,stack:e.stack}),localStorage.removeItem("strava_access_token"),localStorage.removeItem("strava_refresh_token"),localStorage.removeItem("strava_token_expires"),localStorage.removeItem("strava_athlete_id"),E(),S("Disconnected from Strava")}else E()}function C(e,t){const n=document.getElementById("aiChatMessages"),o=document.createElement("div");o.className=`ai-chat-message ${t}`,o.textContent=e,n.appendChild(o),n.scrollTop=n.scrollHeight}function B(){const e=document.getElementById("typing-indicator");e&&e.remove()}}();
//# sourceMappingURL=main.70b583c25afe493eaa4c.js.map