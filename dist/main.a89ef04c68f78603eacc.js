!function(){var e,t,n,o,a={196:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=196,e.exports=t}},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return a[e](n,n.exports,s),n.exports}s.m=a,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},s.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var a=Object.create(null);s.r(a);var r={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&n;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(function(e){r[e]=function(){return n[e]}});return r.default=function(){return n},s.d(a,r),a},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(t,n){return s.f[n](e,t),t},[]))},s.u=function(e){return e+"."+{135:"3db57a925a08dc7d6d51",269:"793f0f575b77ea61b377",359:"67fac73cb1610369a262",819:"e345e0fbc071d19da469",989:"174c0ce924c9051d2ae8"}[e]+".chunk.js"},s.miniCssF=function(e){},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},o="ignite-fitness:",s.l=function(e,t,a,r){if(n[e])n[e].push(t);else{var i,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+a){i=u;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",o+a),i.src=e),n[e]=[t];var p=function(t,o){i.onerror=i.onload=null,clearTimeout(g);var a=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(function(e){return e(o)}),t)return t(o)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",function(){var e={792:0};s.f.j=function(t,n){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(function(n,a){o=e[t]=[n,a]});n.push(o[2]=a);var r=s.p+s.u(t),i=new Error;s.l(r,function(n){if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",i.name="ChunkLoadError",i.type=a,i.request=r,o[1](i)}},"chunk-"+t,t)}};var t=function(t,n){var o,a,r=n[0],i=n[1],c=n[2],l=0;if(r.some(function(t){return 0!==e[t]})){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)c(s)}for(t&&t(n);l<r.length;l++)a=r[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkignite_fitness=self.webpackChunkignite_fitness||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();const i=window.SafeLogger||console;let c=null,l=!1,d={},u=null,p=null,g=null,m=null,f=null;const h=new Map,y=new Map;async function v(e,t,n={}){const o=`${e}:${t}`;if(h.has(o))return h.get(o);if(y.has(o))return y.get(o);n.showLoading&&function(e="Loading..."){C();const t=document.createElement("div");t.id="loading-overlay",t.className="loading-overlay",t.innerHTML=`\n        <div class="loading-content">\n            <div class="loading-spinner"></div>\n            <p style="margin: 15px 0 0 0; color: #2d3748; font-weight: 500;">${e}</p>\n        </div>\n    `,document.body.appendChild(t)}(n.loadingMessage||`Loading ${t}...`);try{const a={"./ai/context-aware-ai.js":()=>s.e(989).then(s.t.bind(s,989,23)),"./training/seasonal-training.js":()=>s.e(359).then(s.t.bind(s,359,23)),"./core/data-store.js":()=>s.e(135).then(s.t.bind(s,135,23)),"./training/workout-generator.js":()=>s.e(269).then(s.t.bind(s,269,23)),"./ai/pattern-detector.js":()=>s.e(819).then(s.t.bind(s,819,23))}[e];let r;r=a||(()=>s(196)(e));const i=(async()=>{const e=new((await r())[t]);return h.set(o,e),e})();y.set(o,i);const c=await i;return y.delete(o),n.showLoading&&C(),c}catch(a){throw i.error("Failed to load module",{modulePath:e,className:t,error:a.message,stack:a.stack}),y.delete(o),n.showLoading&&C(),a}}function k(){const e="2.0",t=localStorage.getItem("ignitefitness_data_version");t!==e&&(i.info("Migrating user data",{fromVersion:t||"1.0",toVersion:e}),t&&"1.0"!==t||function(){try{const e=localStorage.getItem("ignitefitness_users");if(e){const t=JSON.parse(e),n={};Object.keys(t).forEach(e=>{const o=t[e];n[e]={version:"2.0",username:e,password:o.password,athleteName:o.athleteName,personalData:o.personalData||{},goals:o.goals||{},workoutSchedule:o.workoutSchedule||{},sessions:o.sessions||[],preferences:o.preferences||{},lastSync:o.lastSync||Date.now(),createdAt:o.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),localStorage.setItem("ignitefitness_users",JSON.stringify(n))}!function(){const e=localStorage.getItem("strava_access_token"),t=localStorage.getItem("strava_refresh_token"),n=localStorage.getItem("strava_token_expires"),o=localStorage.getItem("strava_athlete_id");if(e&&t){const a={access_token:e,refresh_token:t,expires_at:parseInt(n)||0,athlete_id:o,last_updated:Date.now()};localStorage.setItem("ignitefitness_strava_data",JSON.stringify(a)),localStorage.removeItem("strava_access_token"),localStorage.removeItem("strava_refresh_token"),localStorage.removeItem("strava_token_expires"),localStorage.removeItem("strava_athlete_id")}}(),function(){const e=localStorage.getItem("ignitefitness_workouts");if(e)try{const t=JSON.parse(e);localStorage.setItem("ignitefitness_workout_data",JSON.stringify({workouts:t,version:"2.0",last_updated:Date.now()})),localStorage.removeItem("ignitefitness_workouts")}catch(e){i.error("Error migrating workout data",{error:e.message,stack:e.stack})}}()}catch(e){i.error("Error during data migration",{error:e.message,stack:e.stack})}}(),localStorage.setItem("ignitefitness_data_version",e),i.info("Data migration completed"))}function x(){document.getElementById("loginForm").classList.remove("hidden"),document.getElementById("userDashboard").classList.add("hidden")}function w(){document.getElementById("loginForm").classList.add("hidden"),document.getElementById("userDashboard").classList.remove("hidden");const e=document.getElementById("currentAthleteName");e&&d[c]&&(e.textContent=d[c].athleteName||c)}function b(){if(!c||!d[c])return;const e=d[c];if(e.personalData&&(e.personalData.age&&(document.getElementById("age").value=e.personalData.age),e.personalData.weight&&(document.getElementById("weight").value=e.personalData.weight),e.personalData.height&&(document.getElementById("height").value=e.personalData.height),e.personalData.experience&&(document.getElementById("experience").value=e.personalData.experience)),e.goals){if(e.goals.primary){const t=document.querySelector(`input[name="primaryGoal"][value="${e.goals.primary}"]`);t&&(t.checked=!0)}if(e.goals.secondary){const t=document.querySelector(`input[name="secondaryGoal"][value="${e.goals.secondary}"]`);t&&(t.checked=!0)}}}function I(){var e,t,n;const o=d[c];return o?{goals:o.goals||{},experience:(null===(e=o.personalData)||void 0===e?void 0:e.experience)||"beginner",personalData:o.personalData||{},currentPhase:(null===(t=p)||void 0===t||null===(t=t.getCurrentPhase())||void 0===t?void 0:t.phase)||"off-season",recentWorkouts:(null===(n=o.data)||void 0===n?void 0:n.sessions)||[],preferences:{preferredTimes:[],favoriteExercises:[],intensityPreference:"moderate",sessionLength:"medium",restDayPattern:{}}}:{}}function _(){const e=document.getElementById("syncStatus"),t=document.getElementById("lastSync");if(e&&t){const n=localStorage.getItem("ignitefitness_last_sync");if(n){const o=new Date(parseInt(n));t.textContent=`Last sync: ${o.toLocaleString()}`,e.textContent="‚úÖ Synced"}else t.textContent="Last sync: Never",e.textContent="üîÑ Syncing..."}}function S(){var e,t;const n=(null===(e=document.getElementById("sessionType"))||void 0===e?void 0:e.value)||"Upper Body",o=parseInt(null===(t=document.getElementById("workoutDuration"))||void 0===t?void 0:t.value)||60;if(c&&m){const e=I();try{!function(e){const t=document.getElementById("workoutPlan");if(!t)return;const n=`\n        <div class="workout-plan">\n            <h3>Generated Workout Plan</h3>\n            <div class="workout-info">\n                <p><strong>Type:</strong> ${e.type}</p>\n                <p><strong>Focus:</strong> ${e.focus}</p>\n                <p><strong>Duration:</strong> ${e.duration} minutes</p>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Warmup (${e.warmup.duration} minutes)</h4>\n                <ul>\n                    ${e.warmup.exercises.map(e=>`\n                        <li><strong>${e.name}:</strong> ${e.duration} minutes - ${e.description}</li>\n                    `).join("")}\n                </ul>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Main Exercises</h4>\n                <div class="exercises-list">\n                    ${e.exercises.map((e,t)=>`\n                        <div class="exercise-item">\n                            <h5>${t+1}. ${e.name}</h5>\n                            <div class="exercise-details">\n                                <span><strong>Sets:</strong> ${e.sets}</span>\n                                <span><strong>Reps:</strong> ${e.reps}</span>\n                                <span><strong>Weight:</strong> ${e.weight} lbs</span>\n                                <span><strong>RPE:</strong> ${e.rpe}/10</span>\n                                <span><strong>Rest:</strong> ${e.rest}s</span>\n                            </div>\n                            ${e.notes?`<p class="exercise-notes">${e.notes}</p>`:""}\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n            \n            <div class="workout-section">\n                <h4>Cooldown (${e.cooldown.duration} minutes)</h4>\n                <ul>\n                    ${e.cooldown.exercises.map(e=>`\n                        <li><strong>${e.name}:</strong> ${e.duration} minutes - ${e.description}</li>\n                    `).join("")}\n                </ul>\n            </div>\n            \n            ${e.notes?`\n                <div class="workout-notes">\n                    <h4>Notes</h4>\n                    <p>${e.notes}</p>\n                </div>\n            `:""}\n        </div>\n    `;t.innerHTML=n}(m.generateWorkout(e,n,o)),D("Workout plan generated successfully!")}catch(e){i.error("Workout generation failed",{error:e.message,stack:e.stack}),E(null,"Failed to generate workout plan")}}}function E(e,t){e&&(e.textContent=t,e.style.display="block")}if(document.addEventListener("DOMContentLoaded",()=>{i.info("Ignite Fitness App Starting"),k();const e=localStorage.getItem("ignitefitness_current_user");e&&(c=e,l=!0);const t=localStorage.getItem("ignitefitness_users");if(t)try{d=JSON.parse(t)}catch(e){i.error("Error parsing saved users",{error:e.message,stack:e.stack}),d={}}!async function(){try{await async function(){try{const e=await v("./modules/ai/ContextAwareAI.js","ContextAwareAI");u=e,i.info("AI system initialized")}catch(e){i.warn("ContextAwareAI not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await v("./modules/data/DataStore.js","DataStore");g=e,g.setCurrentUser(c),i.info("Data store initialized")}catch(e){i.warn("DataStore not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await v("./modules/workout/WorkoutGenerator.js","WorkoutGenerator");m=e,i.info("Workout generator initialized")}catch(e){i.warn("WorkoutGenerator not available",{error:e.message,stack:e.stack})}}(),await async function(){try{const e=await v("./modules/ai/PatternDetector.js","PatternDetector");f=e,i.info("Pattern detector initialized")}catch(e){i.warn("PatternDetector not available",{error:e.message,stack:e.stack})}}(),i.info("Core systems initialized successfully")}catch(e){i.error("Failed to initialize core systems",{error:e.message,stack:e.stack}),E(null,"Some features may not be available. Please refresh the page.")}}(),[{path:"./modules/ai/ExpertCoordinator.js",className:"ExpertCoordinator"},{path:"./modules/ui/DashboardRenderer.js",className:"DashboardRenderer"},{path:"./modules/workout/WorkoutGenerator.js",className:"WorkoutGenerator"}].forEach(({path:e,className:t})=>{v(e,t,{showLoading:!1}).catch(e=>i.warn("Preload failed",{className:t,error:e.message,stack:e.stack}))}),function(){const e=document.createElement("style");e.textContent="\n        .workout-plan {\n            background: #f7fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 8px;\n            padding: 20px;\n            margin: 20px 0;\n        }\n        \n        .workout-info {\n            background: white;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 15px 0;\n            border-left: 4px solid #4299e1;\n        }\n        \n        .workout-section {\n            margin: 20px 0;\n        }\n        \n        .workout-section h4 {\n            color: #2d3748;\n            margin-bottom: 10px;\n            padding-bottom: 5px;\n            border-bottom: 2px solid #e2e8f0;\n        }\n        \n        .exercises-list {\n            display: flex;\n            flex-direction: column;\n            gap: 15px;\n        }\n        \n        .exercise-item {\n            background: white;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n        }\n        \n        .exercise-item h5 {\n            margin: 0 0 10px 0;\n            color: #2d3748;\n        }\n        \n        .exercise-details {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 15px;\n            margin: 10px 0;\n        }\n        \n        .exercise-details span {\n            background: #edf2f7;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 14px;\n        }\n        \n        .exercise-notes {\n            margin: 10px 0 0 0;\n            font-style: italic;\n            color: #4a5568;\n            font-size: 14px;\n        }\n        \n        .workout-notes {\n            background: #fff5f5;\n            border: 1px solid #fed7d7;\n            border-radius: 6px;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        \n        .workout-notes h4 {\n            color: #742a2a;\n            margin: 0 0 10px 0;\n        }\n        \n        .workout-notes p {\n            margin: 0;\n            color: #742a2a;\n        }\n    ",document.head.appendChild(e)}(),l&&c?(w(),b(),B(),j(),_(),function(){var e;if(!c)return;const t=d[c],n=document.getElementById("recentWorkoutsList");if(!n)return;const o=((null==t||null===(e=t.data)||void 0===e?void 0:e.sessions)||[]).slice(0,5);if(0===o.length)return void(n.innerHTML="<p>No recent workouts found. Start your first workout!</p>");const a=o.map(e=>{var t;const n=new Date(e.start_at).toLocaleDateString(),o=e.duration||"Unknown",a=(null===(t=e.exercises)||void 0===t?void 0:t.length)||0;return`\n            <div class="workout-item">\n                <div class="workout-info">\n                    <h6>${e.type||"Workout"}</h6>\n                    <p>${n}</p>\n                </div>\n                <div class="workout-stats">\n                    <span>${o} min</span>\n                    <span>${a} exercises</span>\n                </div>\n            </div>\n        `}).join("");n.innerHTML=a}()):x();const n=document.getElementById("aiChatInput");n&&n.addEventListener("keypress",e=>{"Enter"===e.key&&function(){const e=document.getElementById("aiChatInput"),t=e.value.trim();if(!t)return;P(t,"user"),e.value="",function(){const e=document.getElementById("aiChatMessages"),t=document.createElement("div");t.className="ai-chat-message ai",t.id="typing-indicator",t.textContent="AI Coach is thinking...",e.appendChild(t),e.scrollTop=e.scrollHeight}(),u?u.processUserInput(t).then(e=>{L(),P(e,"ai")}).catch(e=>{L(),P("Sorry, I encountered an error. Please try again.","ai"),i.error("AI Error",{error:e.message,stack:e.stack})}):(L(),P("AI system is not available. Please try again later.","ai"))}()}),i.info("Ignite Fitness App Ready")}),"undefined"!=typeof window&&(window._generateWorkoutPlan=function(){S()}),!document.getElementById("notification-styles")){const e=document.createElement("style");e.id="notification-styles",e.textContent="\n        @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        .notification {\n            animation: slideIn 0.3s ease;\n        }\n        .loading-spinner {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n            border: 3px solid rgba(255,255,255,.3);\n            border-radius: 50%;\n            border-top-color: #fff;\n            animation: spin 1s ease-in-out infinite;\n        }\n        @keyframes spin {\n            to { transform: rotate(360deg); }\n        }\n        .loading-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0,0,0,0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 10000;\n        }\n        .loading-content {\n            background: white;\n            padding: 30px;\n            border-radius: 10px;\n            text-align: center;\n            box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n        }\n    ",document.head.appendChild(e)}function C(){const e=document.getElementById("loading-overlay");e&&e.remove()}function D(e){let t=document.getElementById("success-notification");t||(t=document.createElement("div"),t.id="success-notification",t.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #68d391;\n            color: white;\n            padding: 15px 20px;\n            border-radius: 5px;\n            z-index: 1000;\n            display: none;\n        ",document.body.appendChild(t)),t.textContent=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},3e3)}function B(){if(!p)return;const e=p.getCurrentPhase(),t=document.getElementById("currentPhaseName"),n=document.getElementById("phaseProgress");if(t&&(t.textContent=e.details.name),n){const t=Math.round(100*e.phaseProgress);n.textContent=`${t}% Complete`}}function j(){const e=localStorage.getItem("strava_access_token"),t=localStorage.getItem("strava_refresh_token"),n=localStorage.getItem("strava_token_expires"),o=localStorage.getItem("strava_athlete_id"),a=document.getElementById("stravaStatus"),r=document.getElementById("stravaConnectBtn"),s=document.getElementById("stravaDisconnectBtn"),i=document.getElementById("stravaSyncBtn");if(!e||!t||!n)return a.className="device-status disconnected",a.innerHTML="<p>‚ùå Not connected to Strava</p>",r.style.display="inline-block",s.style.display="none",void(i.style.display="none");const c=Date.now()/1e3,l=parseInt(n);c>=l?N():(a.className="device-status connected",a.innerHTML=`\n        <p>‚úÖ Connected to Strava</p>\n        <div class="device-info">\n            <h5>Athlete ID: ${o||"Unknown"}</h5>\n            <p>Token expires: ${new Date(1e3*l).toLocaleString()}</p>\n        </div>\n    `,r.style.display="none",s.style.display="inline-block",i.style.display="inline-block")}async function N(){const e=localStorage.getItem("strava_refresh_token");if(e)try{const t=await fetch("/.netlify/functions/strava-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"refresh_token",refreshToken:e})});if(!t.ok)throw new Error("Token refresh failed");const n=await t.json();localStorage.setItem("strava_access_token",n.access_token),localStorage.setItem("strava_refresh_token",n.refresh_token),localStorage.setItem("strava_token_expires",n.expires_at),j()}catch(e){i.error("Token refresh failed",{error:e.message,stack:e.stack}),localStorage.removeItem("strava_access_token"),localStorage.removeItem("strava_refresh_token"),localStorage.removeItem("strava_token_expires"),localStorage.removeItem("strava_athlete_id"),j(),D("Disconnected from Strava")}else j()}function P(e,t){const n=document.getElementById("aiChatMessages"),o=document.createElement("div");o.className=`ai-chat-message ${t}`,o.textContent=e,n.appendChild(o),n.scrollTop=n.scrollHeight}function L(){const e=document.getElementById("typing-indicator");e&&e.remove()}}();
//# sourceMappingURL=main.a89ef04c68f78603eacc.js.map