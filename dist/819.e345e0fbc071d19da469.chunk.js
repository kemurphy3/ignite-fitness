(self.webpackChunkignite_fitness=self.webpackChunkignite_fitness||[]).push([[819],{819:function(e){class t{constructor(){this.logger=window.SafeLogger||console,this.patterns={performance:{},timing:{},volume:{},intensity:{},recovery:{},progression:{}},this.insights=[],this.recommendations=[]}analyzePatterns(e,t){return this.patterns={performance:this.analyzePerformancePatterns(e),timing:this.analyzeTimingPatterns(e),volume:this.analyzeVolumePatterns(e),intensity:this.analyzeIntensityPatterns(e),recovery:this.analyzeRecoveryPatterns(e),progression:this.analyzeProgressionPatterns(e)},this.generateInsights(),this.generateRecommendations(t),{patterns:this.patterns,insights:this.insights,recommendations:this.recommendations}}analyzePerformancePatterns(e){const t=e.sessions||[];if(t.length<3)return{};return{dayOfWeek:this.analyzeDayOfWeekPerformance(t),timeOfDay:this.analyzeTimeOfDayPerformance(t),exercisePerformance:this.analyzeExercisePerformance(t),consistency:this.calculateConsistency(t),improvement:this.calculateImprovement(t)}}analyzeDayOfWeekPerformance(e){const t={};for(let e=0;e<7;e++)t[e]={count:0,totalRPE:0,averageRPE:0,totalVolume:0,averageVolume:0};return e.forEach(e=>{const r=new Date(e.start_at).getDay(),s=e.averageRPE||0,n=this.calculateSessionVolume(e);t[r].count++,t[r].totalRPE+=s,t[r].totalVolume+=n}),Object.keys(t).forEach(e=>{const r=t[e];r.count>0&&(r.averageRPE=r.totalRPE/r.count,r.averageVolume=r.totalVolume/r.count)}),t}analyzeTimeOfDayPerformance(e){const t={morning:{count:0,totalRPE:0,averageRPE:0},afternoon:{count:0,totalRPE:0,averageRPE:0},evening:{count:0,totalRPE:0,averageRPE:0}};return e.forEach(e=>{const r=new Date(e.start_at).getHours(),s=r<12?"morning":r<17?"afternoon":"evening",n=e.averageRPE||0;t[s].count++,t[s].totalRPE+=n}),Object.keys(t).forEach(e=>{const r=t[e];r.count>0&&(r.averageRPE=r.totalRPE/r.count)}),t}analyzeExercisePerformance(e){const t={};return e.forEach(e=>{e.exercises&&e.exercises.forEach(r=>{t[r.name]||(t[r.name]={count:0,totalWeight:0,totalReps:0,totalSets:0,averageWeight:0,averageReps:0,averageSets:0,progression:[]});const s=t[r.name];s.count++,s.totalWeight+=r.weight||0,s.totalReps+=r.reps||0,s.totalSets+=r.sets||0,s.progression.push({date:e.start_at,weight:r.weight||0,reps:r.reps||0,sets:r.sets||0})})}),Object.keys(t).forEach(e=>{const r=t[e];r.count>0&&(r.averageWeight=r.totalWeight/r.count,r.averageReps=r.totalReps/r.count,r.averageSets=r.totalSets/r.count,r.progression=this.calculateExerciseProgression(r.progression))}),t}calculateConsistency(e){if(!e||e.length<7)return 0;try{const t=e.filter(e=>{if(!e||!e.start_at)return!1;const t=new Date(e.start_at);if(isNaN(t.getTime()))return!1;const r=new Date;return r.setDate(r.getDate()-30),t>=r}),r=3/7*30,s=t.length;return Math.min(1,s/r)}catch(e){return this.logger.error("Error calculating consistency",{error:e.message,stack:e.stack}),0}}calculateImprovement(e){if(!e||e.length<4)return 0;try{const t=e.filter(e=>e&&e.start_at&&!isNaN(new Date(e.start_at).getTime()));if(t.length<4)return 0;const r=[...t].sort((e,t)=>new Date(e.start_at)-new Date(t.start_at)),s=r.slice(0,Math.floor(r.length/2)),n=r.slice(Math.floor(r.length/2)),a=s.reduce((e,t)=>e+this.calculateSessionVolume(t),0),i=n.reduce((e,t)=>e+this.calculateSessionVolume(t),0);return 0===a?0:(i-a)/a}catch(e){return this.logger.error("Error calculating improvement",{error:e.message,stack:e.stack}),0}}analyzeTimingPatterns(e){const t=e.sessions||[];return t.length<3?{}:{preferredDays:this.getPreferredDays(t),preferredTimes:this.getPreferredTimes(t),sessionFrequency:this.calculateSessionFrequency(t),restDayPattern:this.analyzeRestDayPattern(t)}}getPreferredDays(e){const t={};for(let e=0;e<7;e++)t[e]=0;return e.forEach(e=>{const r=new Date(e.start_at).getDay();t[r]++}),Object.entries(t).sort(([,e],[,t])=>t-e).map(([e,t])=>({day:parseInt(e),count:t}))}getPreferredTimes(e){const t={morning:0,afternoon:0,evening:0};return e.forEach(e=>{const r=new Date(e.start_at).getHours();t[r<12?"morning":r<17?"afternoon":"evening"]++}),Object.entries(t).sort(([,e],[,t])=>t-e).map(([e,t])=>({time:e,count:t}))}calculateSessionFrequency(e){if(e.length<2)return 0;const t=new Date(Math.min(...e.map(e=>new Date(e.start_at)))),r=(new Date(Math.max(...e.map(e=>new Date(e.start_at))))-t)/864e5;return e.length/Math.max(1,r)}analyzeRestDayPattern(e){const t=[],r=e.sort((e,t)=>new Date(e.start_at)-new Date(t.start_at));for(let e=1;e<r.length;e++){const s=(new Date(r[e].start_at)-new Date(r[e-1].start_at))/864e5;s>1&&t.push(s-1)}return{averageRestDays:t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0,maxRestDays:t.length>0?Math.max(...t):0,minRestDays:t.length>0?Math.min(...t):0}}analyzeVolumePatterns(e){const t=e.sessions||[];if(t.length<3)return{};const r=t.map(e=>this.calculateSessionVolume(e));return{averageVolume:this.calculateAverage(r),volumeTrend:this.calculateTrend(r),volumeVariability:this.calculateVariability(r),peakVolume:Math.max(...r),lowVolume:Math.min(...r)}}analyzeIntensityPatterns(e){const t=e.sessions||[];if(t.length<3)return{};const r=t.map(e=>e.averageRPE||0).filter(e=>e>0);return{averageRPE:this.calculateAverage(r),rpeTrend:this.calculateTrend(r),rpeVariability:this.calculateVariability(r),maxRPE:Math.max(...r),minRPE:Math.min(...r)}}analyzeRecoveryPatterns(e){const t=e.sessions||[];return t.length<3?{}:{recoveryTime:this.calculateAverageRecoveryTime(t),fatiguePattern:this.analyzeFatiguePattern(t),overtrainingRisk:this.assessOvertrainingRisk(t)}}analyzeProgressionPatterns(e){const t=e.sessions||[];return t.length<3?{}:{strengthProgression:this.calculateStrengthProgression(t),volumeProgression:this.calculateVolumeProgression(t),consistencyProgression:this.calculateConsistencyProgression(t)}}calculateSessionVolume(e){return e.exercises?e.exercises.reduce((e,t)=>e+(t.weight||0)*(t.reps||0)*(t.sets||0),0):0}calculateExerciseProgression(e){if(e.length<2)return 0;const t=e.sort((e,t)=>new Date(e.date)-new Date(t.date)),r=t[0],s=t[t.length-1],n=r.weight*r.reps*r.sets,a=s.weight*s.reps*s.sets;return 0===n?0:(a-n)/n}calculateAverage(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}calculateTrend(e){if(e.length<2)return 0;const t=e.slice(0,Math.floor(e.length/2)),r=e.slice(Math.floor(e.length/2)),s=this.calculateAverage(t),n=this.calculateAverage(r);return 0===s?0:(n-s)/s}calculateVariability(e){if(e.length<2)return 0;const t=this.calculateAverage(e);if(0===t)return 0;const r=e.reduce((e,r)=>e+Math.pow(r-t,2),0)/e.length;return Math.sqrt(r)/t}calculateAverageRecoveryTime(e){const t=e.sort((e,t)=>new Date(e.start_at)-new Date(t.start_at)),r=[];for(let e=1;e<t.length;e++){const s=(new Date(t[e].start_at)-new Date(t[e-1].start_at))/36e5;r.push(s)}return this.calculateAverage(r)}analyzeFatiguePattern(e){const t=e.sort((e,t)=>new Date(e.start_at)-new Date(t.start_at)).map(e=>e.averageRPE||0),r=this.calculateTrend(t);return{fatigueTrend:r,isFatigued:r<-.1,fatigueLevel:Math.abs(r)}}assessOvertrainingRisk(e){const t=e.slice(-7),r=this.calculateAverage(t.map(e=>e.averageRPE||0)),s=this.calculateSessionFrequency(t);let n=0;return r>8?n+=3:r>7?n+=2:r>6&&(n+=1),s>6?n+=3:s>4?n+=2:s>2&&(n+=1),{riskScore:n,riskLevel:n>=5?"high":n>=3?"medium":"low",factors:{highIntensity:r>7,highFrequency:s>4,insufficientRecovery:this.calculateAverageRecoveryTime(t)<24}}}calculateStrengthProgression(e){const t=this.analyzeExercisePerformance(e),r=Object.values(t).map(e=>e.progression),s=this.calculateAverage(r);return{averageProgression:s,progressionLevel:s>.1?"excellent":s>.05?"good":s>0?"moderate":"poor"}}calculateVolumeProgression(e){const t=e.map(e=>this.calculateSessionVolume(e)),r=this.calculateTrend(t);return{trend:r,progressionLevel:r>.1?"increasing":r>-.1?"stable":"decreasing"}}calculateConsistencyProgression(e){const t=this.calculateConsistency(e);return{consistency:t,consistencyLevel:t>.8?"excellent":t>.6?"good":t>.4?"moderate":"poor"}}generateInsights(){this.insights=[];try{var e,t,r,s,n,a;if(null!==(e=this.patterns)&&void 0!==e&&null!==(e=e.performance)&&void 0!==e&&e.dayOfWeek){const e=Object.entries(this.patterns.performance.dayOfWeek).filter(([,e])=>e&&e.count>0&&e.averageRPE>0).sort(([,e],[,t])=>(t.averageRPE||0)-(e.averageRPE||0));if(e.length>0){const t=e[0],r=parseInt(t[0]),s=t[1];!isNaN(r)&&s.averageRPE>0&&this.insights.push({type:"performance",message:`You perform best on ${this.getDayName(r)} with an average RPE of ${s.averageRPE.toFixed(1)}`,priority:"medium",value:s.averageRPE})}}if(null!==(t=this.patterns)&&void 0!==t&&null!==(t=t.timing)&&void 0!==t&&t.preferredTimes&&Array.isArray(this.patterns.timing.preferredTimes)){const e=this.patterns.timing.preferredTimes.find(e=>e&&e.count>0);e&&this.insights.push({type:"timing",message:`You prefer working out in the ${e.time} (${e.count} sessions)`,priority:"low",value:e.count})}if(null!==(r=this.patterns)&&void 0!==r&&r.volume&&"number"==typeof this.patterns.volume.volumeTrend){const e=this.patterns.volume.volumeTrend;Math.abs(e)>.1&&this.insights.push({type:"volume",message:`Your training volume is ${e>0?"increasing":"decreasing"} by ${Math.abs(100*e).toFixed(1)}%`,priority:"high",value:e})}if(null!==(s=this.patterns)&&void 0!==s&&s.intensity&&"number"==typeof this.patterns.intensity.rpeTrend){const e=this.patterns.intensity.rpeTrend;Math.abs(e)>.1&&this.insights.push({type:"intensity",message:`Your training intensity is ${e>0?"increasing":"decreasing"} by ${Math.abs(100*e).toFixed(1)}%`,priority:"medium",value:e})}if(null!==(n=this.patterns)&&void 0!==n&&null!==(n=n.recovery)&&void 0!==n&&n.overtrainingRisk){const e=this.patterns.recovery.overtrainingRisk;e&&"high"===e.riskLevel&&this.insights.push({type:"recovery",message:"High risk of overtraining detected. Consider reducing intensity or frequency.",priority:"high",value:e.riskScore||0})}if(null!==(a=this.patterns)&&void 0!==a&&a.performance&&"number"==typeof this.patterns.performance.consistency){const{consistency:e}=this.patterns.performance;e<.5&&this.insights.push({type:"consistency",message:`Your workout consistency is ${(100*e).toFixed(0)}%. Try to maintain a more regular schedule.`,priority:"medium",value:e})}}catch(e){this.logger.error("Error generating insights",{error:e.message,stack:e.stack})}}generateRecommendations(e){this.recommendations=[];try{var t,r,s,n,a;if(null!==(t=this.patterns)&&void 0!==t&&t.performance&&"number"==typeof this.patterns.performance.consistency){const{consistency:e}=this.patterns.performance;e<.6&&this.recommendations.push({type:"consistency",message:"Try to maintain a more consistent workout schedule",action:"Set specific workout days and times",priority:"high",value:e})}if(null!==(r=this.patterns)&&void 0!==r&&r.volume&&"number"==typeof this.patterns.volume.volumeTrend){const e=this.patterns.volume.volumeTrend;e<-.1?this.recommendations.push({type:"volume",message:"Consider gradually increasing your training volume",action:"Add one more set or exercise to your workouts",priority:"medium",value:e}):e>.2&&this.recommendations.push({type:"volume",message:"Your volume is increasing rapidly. Monitor recovery closely.",action:"Consider adding a deload week if fatigue increases",priority:"medium",value:e})}if(null!==(s=this.patterns)&&void 0!==s&&null!==(s=s.recovery)&&void 0!==s&&s.overtrainingRisk){const e=this.patterns.recovery.overtrainingRisk;e&&"high"===e.riskLevel?this.recommendations.push({type:"recovery",message:"Take a deload week to allow for proper recovery",action:"Reduce intensity by 20-30% for one week",priority:"high",value:e.riskScore||0}):e&&"medium"===e.riskLevel&&this.recommendations.push({type:"recovery",message:"Consider adding an extra rest day or reducing intensity slightly",action:"Monitor readiness scores and adjust accordingly",priority:"medium",value:e.riskScore||0})}if(null!==(n=this.patterns)&&void 0!==n&&null!==(n=n.progression)&&void 0!==n&&n.strengthProgression){const e=this.patterns.progression.strengthProgression;e&&"poor"===e.progressionLevel&&this.recommendations.push({type:"progression",message:"Focus on progressive overload to continue improving",action:"Increase weight or reps by 2-5% each week",priority:"high",value:e.averageProgression||0})}if(null!==(a=this.patterns)&&void 0!==a&&null!==(a=a.performance)&&void 0!==a&&a.exercisePerformance){const e=Object.keys(this.patterns.performance.exercisePerformance).length;e<5&&this.recommendations.push({type:"variety",message:"Consider adding more exercise variety to your routine",action:"Try 2-3 new exercises that target different muscle groups",priority:"low",value:e})}}catch(e){this.logger.error("Error generating recommendations",{error:e.message,stack:e.stack})}}getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}getUserPatterns(){return this.patterns}getUserInsights(){return this.insights}getUserRecommendations(){return this.recommendations}}e.exports?e.exports={PatternDetector:t}:window.PatternDetector=t}}]);
//# sourceMappingURL=819.e345e0fbc071d19da469.chunk.js.map